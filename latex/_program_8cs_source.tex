\doxysection{Program.\+cs}
\hypertarget{_program_8cs_source}{}\label{_program_8cs_source}\mbox{\hyperlink{_program_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00001}00001\ \textcolor{keyword}{using\ }Microsoft.AspNetCore.Authentication.JwtBearer;}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00002}00002\ \textcolor{keyword}{using\ }Microsoft.EntityFrameworkCore;}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00003}00003\ \textcolor{keyword}{using\ }Microsoft.Extensions.DependencyInjection;}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00004}00004\ \textcolor{keyword}{using\ }Microsoft.IdentityModel.Tokens;}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00005}00005\ \textcolor{keyword}{using\ }System.Text;}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00006}00006\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_ticketing_application_a_p_i_1_1_context}{TicketingApplicationAPI.Context}};}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00008}\mbox{\hyperlink{_program_8cs_a2f78352277081c620fd4cf92a5ce15e5}{00008}}\ var\ \mbox{\hyperlink{_program_8cs_a2f78352277081c620fd4cf92a5ce15e5}{builder}}\ =\ WebApplication.CreateBuilder(args);}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00010}00010\ \textcolor{comment}{//\ Add\ services\ to\ the\ container.}}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00012}\mbox{\hyperlink{_program_8cs_abc3694a0e15618f2499e5a540264f833}{00012}}\ \mbox{\hyperlink{_program_8cs_a2f78352277081c620fd4cf92a5ce15e5}{builder}}.Services.AddControllers();}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00013}00013\ \textcolor{comment}{//\ Learn\ more\ about\ configuring\ Swagger/OpenAPI\ at\ https://aka.ms/aspnetcore/swashbuckle}}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00014}\mbox{\hyperlink{_program_8cs_a0d7859f9cad50e8e9fdf015100780e07}{00014}}\ \mbox{\hyperlink{_program_8cs_a2f78352277081c620fd4cf92a5ce15e5}{builder}}.Services.AddEndpointsApiExplorer();}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00015}\mbox{\hyperlink{_program_8cs_ae0ce43c019a5621d731d0c622c793644}{00015}}\ \mbox{\hyperlink{_program_8cs_a2f78352277081c620fd4cf92a5ce15e5}{builder}}.Services.AddSwaggerGen();}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00016}\mbox{\hyperlink{_program_8cs_af691d532fb688ae611098ea5f7ce934f}{00016}}\ \mbox{\hyperlink{_program_8cs_a2f78352277081c620fd4cf92a5ce15e5}{builder}}.Services.AddCors(option\ =>}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00017}00017\ \{}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00018}00018\ option.AddPolicy(\textcolor{stringliteral}{"{}MyPolicy"{}},\ \mbox{\hyperlink{_program_8cs_a2f78352277081c620fd4cf92a5ce15e5}{builder}}\ =>\ }
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00019}00019\ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00020}00020\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_program_8cs_a2f78352277081c620fd4cf92a5ce15e5}{builder}}.AllowAnyOrigin()}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00021}00021\ \ \ \ \ \ \ \ \ \ \ \ .AllowAnyMethod()}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00022}00022\ \ \ \ \ \ \ \ \ \ \ \ .AllowAnyHeader();}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00023}00023\ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00025}00025\ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00026}00026\ \});}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00027}\mbox{\hyperlink{_program_8cs_ad98fb45ef898e8cef1e12e8b43bf7257}{00027}}\ \mbox{\hyperlink{_program_8cs_a2f78352277081c620fd4cf92a5ce15e5}{builder}}.Services.AddDbContext<\mbox{\hyperlink{class_ticketing_application_a_p_i_1_1_context_1_1_app_db_context}{AppDbContext}}>(options\ =>}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00028}00028\ \{}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00029}00029\ \ \ \ \ options.UseSqlServer(\mbox{\hyperlink{_program_8cs_a2f78352277081c620fd4cf92a5ce15e5}{builder}}.Configuration.GetConnectionString(\textcolor{stringliteral}{"{}SqlServerConnStr"{}}));}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00030}00030\ \});}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00033}\mbox{\hyperlink{_program_8cs_a82e56f90bd8ccd58e265935691a525c5}{00033}}\ \mbox{\hyperlink{_program_8cs_a2f78352277081c620fd4cf92a5ce15e5}{builder}}.Services.AddAuthentication(x\ =>}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00034}00034\ \{}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00035}00035\ \ \ \ \ x.DefaultAuthenticateScheme\ =\ JwtBearerDefaults.AuthenticationScheme;}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00036}00036\ \ \ \ \ x.DefaultChallengeScheme\ =\ JwtBearerDefaults.AuthenticationScheme;}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00037}00037\ \}).AddJwtBearer(x\ =>}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00038}00038\ \{}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00039}00039\ \ \ \ \ x.RequireHttpsMetadata\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00040}00040\ \ \ \ \ x.SaveToken\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00041}00041\ \ \ \ \ x.TokenValidationParameters\ =\ \textcolor{keyword}{new}\ TokenValidationParameters}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00042}00042\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00043}00043\ \ \ \ \ \ \ \ \ ValidateIssuerSigningKey\ =\ \textcolor{keyword}{true},}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00044}00044\ \ \ \ \ \ \ \ \ IssuerSigningKey\ =\ \textcolor{keyword}{new}\ SymmetricSecurityKey(Encoding.UTF8.GetBytes(\textcolor{stringliteral}{"{}veryverysecret....."{}})),}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00045}00045\ \ \ \ \ \ \ \ \ ValidateAudience\ =\ \textcolor{keyword}{false},}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00046}00046\ \ \ \ \ \ \ \ \ ValidateIssuer\ =\ \textcolor{keyword}{false}}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00047}00047\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00048}00048\ \});}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00049}00049\ }
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00050}\mbox{\hyperlink{_program_8cs_a7b225fcb720e4d5ed2bbf60e28a25e6d}{00050}}\ var\ \mbox{\hyperlink{_program_8cs_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}\ =\ \mbox{\hyperlink{_program_8cs_a2f78352277081c620fd4cf92a5ce15e5}{builder}}.Build();}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00052}00052\ \textcolor{comment}{//\ Configure\ the\ HTTP\ request\ pipeline.}}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00053}\mbox{\hyperlink{_program_8cs_a79a944c7f0e25196ca3c5a8638b919b9}{00053}}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_program_8cs_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.Environment.IsDevelopment())}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00054}00054\ \{}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00055}00055\ \ \ \ \ \mbox{\hyperlink{_program_8cs_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.UseSwagger();}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00056}00056\ \ \ \ \ \mbox{\hyperlink{_program_8cs_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.UseSwaggerUI();}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00057}00057\ \}}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00059}\mbox{\hyperlink{_program_8cs_aa4d447fc3129a3aa301d736b8bd04ae9}{00059}}\ \mbox{\hyperlink{_program_8cs_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.UseHttpsRedirection();}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00060}\mbox{\hyperlink{_program_8cs_a8c047cfbbd60a7876dfb29ae9f6068b5}{00060}}\ \mbox{\hyperlink{_program_8cs_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.UseCors(\textcolor{stringliteral}{"{}MyPolicy"{}});}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00061}\mbox{\hyperlink{_program_8cs_a6435d8beeff4999dc0b0c6d60a86a4e2}{00061}}\ \mbox{\hyperlink{_program_8cs_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.UseAuthentication();}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00062}00062\ }
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00063}\mbox{\hyperlink{_program_8cs_af6f72d752b2e73aa0292f74bd13237ab}{00063}}\ \mbox{\hyperlink{_program_8cs_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.UseAuthorization();}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00065}\mbox{\hyperlink{_program_8cs_a9e2ee3170aa6279b68eefd1651f7d96c}{00065}}\ \mbox{\hyperlink{_program_8cs_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.MapControllers();}
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{_program_8cs_source_l00067}\mbox{\hyperlink{_program_8cs_aaa3dbf02e269c3ef7e8546d290c6b3dd}{00067}}\ \mbox{\hyperlink{_program_8cs_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.Run();}

\end{DoxyCode}
